# HTML5



## formタグ

action=送信先URL





---



## 2章

### doctype宣言
html文書の先頭行に記載、以後のドキュメントの文書型を宣言する要素

###  html要素
doctype宣言の次に記述され、ドキュメント委がHTMLで構成されていることを示す要素。他の要素はすべてこの内部に記述される。

### head要素
html要素内の先頭に記述され、ドキュメントの情報を示す要素。

### body要素
head要素の次に記述され、ドキュメントのコンテンツを示す要素。

--
html5では要素の記述に大文字、小文字のどちらでも利用することができる。
しかし、xhtmlからの流用も考慮して小文字で書かれることが多い。

### CSS3
CSS3は視覚効果を表現する仕組みが大幅に強化されている。

### html要素
#### lang属性
jaなど
### manifest属性
HTML文書がインターネットにつながっていない状態でもローカル環境で動作させるために
それに必要なファイルの一覧を記述したファイル
拡張子manifestうぃ作成し、そのファイル名をmanifest属性で指定する。
それによりマニフェストファイルに記述されたファイル群はローカル環境にキャッシュされる。

### ヘッダ要素

### meta要素
meta要素を用いてそのHTML文書そのものに関する情報を記述します。
charset属性ではHTML文章の文字エンコーディングを指定。指定時に大文字、小文字は区別されない

### name属性
メタデータの種類を記述し、content属性で指定する。keywordsやdescriptionは検索エンジン向けに
文書の情報を提供するためのもの
	
### title要素
HTML文書にタイトルをつけることができる。省略できず、head要素内に1つ記述する必要がある。



##3章

![image-20200830141525966](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200830141525966.png)

![image-20200830141541218](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200830141541218.png)

### nav要素
同一ページ内のリンクやほかのページ、ホp化のサイトへのリンクなどを記述して
その文書に対するナビゲーションとなるセクション(なくてもいい)

## atricle要素
メインコンテンツを囲む(複数使える)
## aside要素
メインじゃないもの
## figure要素 figcaption
本文から参照される図表。本文から参照されるものの本文に影響しない自己完結したセクションとなる　

## main要素
文書内の主要な部分を示す場合にmain要素を使う(1回のみ)



## 4章
## time要素
日図家や時刻を示すコンテンツについてブラウザが理解できるよう時刻を正確に示す場合に使用します。日付はグレゴリオ暦 、時刻は 24 時間表記で datetime 属性を使って指定します。グレゴリオ歴が導入されていない時代や、正確な時刻を示すことができない場合には time 要素は使いません。
（例：西暦 79 年のベスビオス火山が噴火した日の深夜）


コンピュータにより読み取り可能な日付や時刻がテキスト内に現れる場合は datetime 属性を省略して <time> ～ </time> の中に直接記述することもできます。


日付や時間には以下の様なフォーマットが利用できます。

<time datetime="2000-01-01">2000年1月1日</time>
<time datetime="12:00">正午</time>
<time datetime="12:00:00">正午</time>
<time datetime="2000-01-01T12:00:00">2000年1月1日の正午</time>
<time datetime="2000-01-01T12:00:00+09:00">2000年1月1日の正午</time

## data要素
時間的情報以外のデータについてはdata要素を使ってブラウザに伝えることができます
漢数字などで表現された値を、value 属性に数値として指定します。

## mark要素
html文書の該当するテキストについて利用者が参照しやすいようにハイライト表示によって
目立たせるために使います。

```
<h1>検索結果</h1>
<ul>
  <li>3行目:新しく<mark>HTML5</mark>が策定され</li>
  <li>12行目:<mark>HTML5</mark>の要素には</li>
  <li>54行目:これは<mark>HTML5</mark>特有の</li>
</ul>
```

## ruby要素 rt要素 rp要素
これまでIE独自要素だったがhtml5から標準された
```
<ruby>
案山子<rp>(</rp><rt>かかし</rt><rp>)</rp>
</ruby>
```
ルビを振る範囲を ruby 要素で囲みます。ルビのテキストの部分は rt 要素で囲みます。ruby 要素に対応したブラウザでは、「案山子」の上部に「かかし」のルビを表示するとともに、rp 要素で囲まれた部分（この例ではカッコの部分）は無視するよう動作します。

逆に ruby 要素に対応していないブラウザでは、rp 要素、rt 要素も解釈されないので要素自体が無視され、「案山子（かかし）」と表示されます。

----

#＃メディア関連

## embed要素

audioやvideo要素以外の外部アプリケーションを利用するためのもの

flashなどのプラグインも読み込むことが可能

ex)

グラフィックス関連についても、HTML5では2D、3Dともに強化され、外部プラグインを必要とせずこれらを描画することができるようになりました。

| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/tl_blank.gif) | 種類要素、技術2D ラスター画像の描画canvas 要素、JavaScript ( Lesson 5 にて学習 )2D [ベクター画像](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_105', 750, 480)) の描画svg 要素、JavaScript ( Lesson 6 にて学習 )3D 画像の描画WebGL、JavaScript ( Lesson 7 にて学習 ) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |



## audio要素 video要素

どちらもsrc属性で指定する

audioはautoplayやcontrols(操作パネル表示)などの属性を指定できる

video width属性(再生エリアの幅),height属性(再生エリアの高さ)

autoplay,controls属性などの属性を指定できる。

---

## source要素

audio要素やvideo要素の代わりにsource要素を使って再生するファイルを指定することができる



複数指定も可能でブラウザが要素を上から順番にしらべて再生可能なファイルがあればそれを再生する。

audio要素やvideo要素自体をサポートするブラウザであっても扱える音声や映像フォーマットに違いがあるため複数な環境でもなるべく再生できるための仕様



## trac要素

動画とは別に用意したキャプションファイル(拡張子 .vtt)をtrac属性で指定すると

音声や動画の再生に同期させて字幕を表示させることができます



## canvas要素

対象となるcanvas要素を描画のjavascriptで識別するためのid属性や描画サイズを指定するwidth属性やheight属性などで指定できる

canvas要素を解釈できないブラウザのためにcanvas要素の内部には

代替となる要素を記述することができる。

## svg要素

ビットマップ画像を描画するためにcancvas要素を利用したが

ベクター画像(座標の点同士を線でつないだり、線で囲まれた部分を塗りつぶしたりして構成する画像のこと)を描画する場合はsvg要素をつかう

ラスター画像(bmp,png,jpg)





ex)

[SVG](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_110', 750, 480)) ( Scalable Vector Graphics ) は 2D ベクター画像の描画を XML 形式で記述するための独立した仕様であり、正確には HTML5 の仕様ではありません。
HTML5 では拡張子が .svg であるファイルを読み込んで表示できるほかに、svg 要素を記述し、この中に描画命令を埋め込んで記述する「インライン SVG 」もサポートされています。
これまで SVG のサポートはブラウザでまちまちでしたが、HTML5 をサポートするブラウザではほぼ SVG をサポートしているため、ここでは HTML5 の新要素と同等に取り扱います。

ここでは SVG の <rect> 命令と <circle> 命令を使って長方形と円を描画する指示を記述しています。内側の塗りつぶし ( fill ) や外側の線 ( stroke ) などの色を属性で指定します。



| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/co_tips.gif) | HTML5 では img 要素や br 要素など、コンテンツを含まない「[空要素](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_111', 750, 480)) ( void element ) 」については、その終わりのタグにスラッシュ ( / ) を含めなくてもよくなりました。本コースではスラッシュを省略した表記を採用しています。  例 <img src="/img/sample.png" alt="サンプル画像"> <br>一方、svg 要素内に書かれた < rect > や < circle > などの要素は、SVG の仕様に沿った XML のタグですので、必ずスラッシュを含む “ / >”で閉じる必要があります。 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

この例では、Lesson 5 の canvas 要素と同じ画像を描画していますが、ベクター形式のため以下の特徴があります。

- 描画はやや遅い
- 拡大縮小をしても線の境界がぼやけたりギザギザになったりしない。
- データサイズが小さい。

また、canvas 要素同様、データベースや入力フォームからの値を JavaScript で受け取るようにし、その値に連動して svg 要素内の要素やその属性を変更することで、インタラクティブな画像表現を行うことができます。

## WebGl

HTML5ではWebGLという機能をつかうことでプラグインを使わずに3dグラフィックスについても描画することができます。ブラウザからそのPCのGPUを利用することができるので高速な3D画像の処理が可能になります。利用例としては

ブラウザから利用するマップアプリケーションの3d表示などがあげられます

ex)

WebGL も外部仕様であり、HTML5 はそれをサポートしているに過ぎず、HTML5 の仕様には含まれませんが、ここでは HTML5 の新機能として取り扱います。

また、WebGL による実装は多少面倒なため、実際には WebGL を利用する上で便利な JavaScript のライブラリが存在し、WebGL を直接記述するのではなくそちらを使って記述するケースがほとんどです。

例：
three.js – JavaScript 3D library
http://threejs.org/

---

## 5章

通常 form 要素には、フォームからの入力データを「どこのプログラムに渡すか」を指定する action 属性と「どのように渡すか」を指定する method 属性を指定します。

```
<form action="contact.php" method="post">
```

コモンゲートウェイインターフェイス

## datalist 要素

 datalist 要素によって、検索などのフォーム入力に対して、ユーザの入力した文字に一致する文字列を候補として表示する機能（[オートコンプリート](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_116', 750, 480)) 機能）を実装することができます。



## keygen要素

公開鍵暗号方式で必要な秘密鍵と公開鍵のペアをブラウザだけで生成でき

その公開鍵をwebサーバに送信することができる。秘密鍵と公開鍵はブラウザに保存される

kegen要素では暗号化の強度を示す暗号化鍵長が選択できる。

ブラウザによってサポートしている鍵長がまちまちだが2048,1024ビットなどが選択可能、

keygen要素は暗号化鍵の生成を行うだけでこの鍵をwebブラウザとwebサーバの通信においてどのように利用するかは規定しない。

webサーバ側でwebclientの証明書を作成するなどの用途に使われる。

keygen 要素で生成した秘密鍵と公開鍵を使うと「電子署名」を行うことができます。

ex)Web クライアントは、データを Web サーバに送信する際に自分の秘密鍵を使ってデータに電子署名を行ってから送信します。
Web サーバは、受け取ったデータについて(あらかじめ keygen 要素によって送信された) Web クライアントの公開鍵を使って電子署名が正しいかを確認します。
これにより、Web クライアントから送られるデータをWebサーバは正当なものとして認証することができます(Webクライアント認証)。

## progeress要素

現在進行中のタスクや所入りの進捗状況を棒グラフのパーセンテージで表現できます

max属性には最大値を指定します、指定がない場合は初期値として1.0がセットされます

max属性値に対する割合をvalue属性に設定します。

progress要素を解釈できないブラウザのため以progress内部には進捗状況をテキストで表現することが推奨されています。progress要素を解釈できるブラウザでは

この部分は無視されます。(value属性を省略すれば単なる進行中にできる)

## meter要素

一定の範囲内に占める割合を表現する場合にはmeter要素を使用

meter要素ではvalueで現在値(省略不可)、min属性で最小値(省略は0)を

max属性で最大値(省略1.0)それぞれしていできる。

オプションとしてlowで低い値、highで高い値optimum属性で適切な値をセットすることも可能。この場合、value属性の根がlow以下、またはhigh以上の場合に棒グラフ

の色を変えて表現します。

progressと見た目は同じで扱うデータによってprogressと使い分けする。

## maxlength ,minlength

入力の文字数を制限する、

かつてはtext,passwordのみ指定かのうだったがhtml5よりtextareaでも可能になった。



minlength属性は値が何か入力されている場合のみ有効であり、未入力の場合は

文字数のチェックは行わない。未入力はrequired属性を使用

## required属性

必須入力にできる

title属性を設定するとメッセージも付与できる。

ex)

formにnovalidate属性を設定するとバリデーションを抑止できる。

## autofocus属性

ページ遷移直後に入力ボックスにフォーカスが設定され、すぐに入力が開始できる

かつてはonload処理で設定していたが、HTML5ではautofocusを設定することで簡単に実現できる。もちろん1ページに1つしか設定できない。複数の場合は最初のautofocusにセットされる。

---

## input要素の共通属性

### pattern属性

正規表現を指定できる。

### min ,max属性

数値や日付などの入力を行うtype属性でも使える

### step属性

数値や日付などの入力を行うtype属性などにおて

ステップ値を指定したい場合にstep属性を指定する

step="1000"

1000単位の入力のみ許可する。それ以外はバリデーションエラー

minとmaxを指定して数値の範囲もチェック可能

### list属性

inpuit要素をdatalistと紐づける場合、input要素のlist属性とdatalist要素のid属性を同じ値にする。

### placeholder属性

入力フォーム内に入力を促すヘルプ文字を入れられる

### type属性

#### input type="search"

検索の用途にりようされる入力フォーム

textと機能面に違いはなく、表現が異なる

#### input type="tel"

電話番号のフォーム

#### input type="url"

urlのフォーム

#### input type="date"

min,maxで限定可能。ブラウザによってはカレンダーを出せる

#### input type="time"

時間入力。stepで秒数を指定。

step省略時はstep=60と同等。つまり分単位。

### input type="number"

数値の入力に利用される入力フォームです。min 属性や max 属性（ Lesson 5 参照）で数値の入力可能範囲を限定することも可能です。また step 属性（ Lesson 5 参照）も設定できます。

### input type="range"

範囲指定の数値入力。スライダーでおおよその度合いを指定できるので

音量や明るさといった連続したねを表現する場合に利用できる。

デフォルトmin 0 max100

step省略時は1

初期値はvalueで指定可能。省略時はmin/maxの中間値。

### input type="color"

色の入力。ブラウザによってはカラーパレットから選択可能

| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/tl_blank.gif) | １つの Web ページについて、様々なデバイスの画面サイズの条件に応じてデザイン・レイアウトを可変に扱うようにする技術のことを「[レスポンシブウェブデザイン]といいます。具体的には１つの HTML ファイルに対して、画面サイズに対応した複数の CSS ファイルを用意し、画面の表示幅によってこれを切り替えてデザインを適用するやり方です。HTML ファイルはレイアウトを規定しない文書構造のみをもったファイルとして作成します。 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

![image-20200902172318509](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902172318509.png)

様々なデバイスに対応するといっても、個々のデバイスの画面サイズ毎に（さらにタテ置き、ヨコ置きの場合まで含めて）別個の HTML を用意するのではWeb制作者にとっては制作工数、テスト工数が増えるだけで何らメリットはありません。レスポンシブウェブデザインの技術を使うことで、原則１つの HTML ソースをあらゆる画面サイズに対応して表示させることが可能となります。このようにユーザの閲覧条件に呼応可能 ( Responsive ) なウェブデザインということからこの名前がついています。

### viewport

年々 PC の高機能化によって画面解像度が上がるに従って、Web サイトのコンテンツの幅は徐々に広い幅でデザインされていきます。昨今では PC の横幅の最小値を 1024px でデザインされているサイトが一般的です。

 横幅がこれより小さいスマホやタブレットでこのサイトを閲覧しようとすると、縮小されて表示され、小さい画面での操作がやりにくくなります。 コンテンツを縮小させずに、現在表示している端末の横幅で表示領域を設定するために使うのが viewportです。`
```
<meta name="viewport" content="width=device-width, initial-scale=1.0">`
````

### メディアクエリ

Viewport でコンテンツの横幅を設定したら、次に PC とタブレットとスマホで表示を変えるしくみを導入します。


Lesson 1 では説明の都合上、わかりやすいようにデバイスごとに CSS ファイルを用意し振り分けた形として説明しましたが、読み込み時間の問題や保守のしやすさから、ひとつの CSS ファイルにすべてのデバイスのケースを場合分けして記述するのが一般的です。

@media で始まるエントリにて解像度ごとに CSS を設定しています。これを「[メディアクエリ](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_136', 750, 480)) 」と呼びます。
この例では、<div id="content"> ～ </div> 要素の幅が３種類の画面解像度によってそれぞれ設定されます。

| 画面解像度      | <div id="content">～</div> の横幅      |
| --------------- | -------------------------------------- |
| 1024px ～       | 960px で固定（ PC を想定）             |
| 768px ～ 1023px | 640px で固定（タブレットを想定）       |
| ～ 767px        | デバイスの横幅いっぱい（スマホを想定） |

| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/tl_blank.gif) | 画面の横幅でメディアクエリが切り替わる点を「[ブレークポイント](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_137', 750, 480)) 」といいます。この例では、768px と 1024px がブレークポイントです。 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |



| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/co_notice.gif) | 端末の種類ではなく、横幅だけで切り替えている点に注意してください。よって、この CSS を適用していると以下のような現象がおきます。 PC のブラウザの横幅を小さくしていった場合、1023px 以下になると <div id="content"> ～ </div> のエリアは 960px から 640px に小さくなるさらに PC のブラウザの横幅を小さくしていった場合、767px 以下になると <div id="content"> ～ </div> のエリアは横幅いっぱいになる1280px × 720px の画面解像度のタブレットでは、タブレットを回転させる度に <div id="content"> ～ </div> のエリアの横幅が切り替わる |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

### 可変グリッドレイアウト

メディアクエリによって、コンテンツの表示エリアの幅が変化するのであれば、その内部のボタンなどのコンテンツについてもピクセル幅で指定するわけにはいきません。また、その配置も横幅によっては、縦に並んだり、順番を入れ替えたり、非表示にしたりするので、固定的にレイアウトすることができません。 このように、可変性を持つコンテンツを、[グリッドレイアウト](javascript:showPopup( POPUPWND_GLOSSARY, 'glossary', '../course/Popup.aspx?cid=00096T11&pid=gloss&lid=ITEM_138', 750, 480)) を使って配置する手法を「可変グリッドレイアウト（ Fluid Grid Layout ）」といいます。

| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/tl_blank.gif) | では、グリッドレイアウトとはどういう手法なのかを説明します。  グリッドレイアウトは、グリッドシステム、グリッドデザインとも呼ばれます。元は新聞、雑誌などの印刷物のデザイン分野で利用されている手法で、画面を一定の間隔で仮想のグリッド（格子状）に分割し、そのグリッドに沿ってコンテンツを配置していく手法です。ウェブデザインにおいては、コンテンツが追加されるとページは下へ下へと伸びていく性質を持つため、縦横の格子状ではなく、横幅だけを分割した短冊状のグリッドを利用してデザインされる場合が多いです。 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

| ![img](https://nlp.netlearning.co.jp/NS/course_res/parts/nl/tl_blank.gif) | 画面の幅が変わる場合は、Lesson 3 で説明したブレークポイントの前後で、このグリッド数を変化させ、コンテンツを再配置していきます。ブレークポイントを超えない範囲での解像度の違いは、グリッド数は変化させずにグリッドの幅を拡大・縮小することで対応します。 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

### CSS フレームワーク

レスポンシブなデザインを行う場合に、よく使われるスタイルをあらかじめ定義した CSS のパッケージのことを「 CSS フレームワーク 」といいます。ここでは、CSS フレームワークの中で代表的な「 Bootstrap 」を例に、可変グリッドレイアウトによる要素の具体的な配置方法について学習します。


Bootstrap
http://getbootstrap.com/

Bootstrap の可変グリッドレイアウト以外のスタイル設定については上記 URL を参照してください。

Bootstrap におけるコンテンツの横幅
Bootstrap ではブレークポイントは３箇所指定されています。Web コンテンツはすべて <div class="container"> ～ </div> の中に記述することが想定されており、画面解像度によって横幅は以下のように決められています。

![image-20200902174326103](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902174326103.png)

まず、横方向に並べたい要素を <div class="row"> ～ </div> で囲みます。
各要素の class 属性には col を設定し、かつ画面解像度ごとにグリッド何個を占有するかを指定します。この例では、col-xs-6（ Extra small で６個幅）、col-sm-4（ Smallで４個幅）、col-md-3（ Medium で３個幅）で要素を配置するよう指定しています。


​	
col-xx- の指定は「 xx 解像度以上の場合に」という意味になりますから、この例では画面解像度が Large の場合の指定がないにもかかわらず col-md-3 の指定により３個幅となります。


以下はブラウザでの表示例です。（説明の都合上、各 div 要素を色分けしています）

![image-20200902174456949](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902174456949.png)

---

ウェブアプリケーション

ウェブアプリケーションとは** これまでの章で述べたように、HTML5 になって以下の点が大きく進化しました。 マルチメディア関連のデータを外部のプラグインを必要とせず操作することが可能となった

CSS3 によりユーザインタフェースに関する表現力が向上した

フォーム関連要素が強化され、ユーザの入力に関する操作性が向上した さらに、 コンピュータの高性能化ブラウザのバージョンアップによる JavaScript の処理エンジンの改良によって、以前に比べると JavaScript が高速に処理されるようになりました。 これらの要因を背景に、HTML コンテンツをブラウザ上でアプリケーションとして動作させることが実用的になりました。これをウェブアプリケーションといいます。 

通常のアプリケーション（ネイティブアプリケーション）とウェブアプリケーションの違いは以下のようになります

![image-20200902183911051](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902183911051.png)

### template 要素

サーバサイドプログラミング ではすでによく使われていますが、HTML の雛型をあらかじめ用意し、そこに表示するデータはあとからプログラムによって埋め込むことで動的なコンテンツを作成する手法があります。


HTML5 においては HTML コンテンツが Web クライアントサイドでも動作する場合を想定し、同様な手法で JavaScript や Ajax などによる文書の動的な挿入が行えるよう、その部分に template 要素を使って要素の形だけをあらかじめ定義しておくことができます。

### webstrage

ウェブアプリケーションにおいては、Web サーバより転送されたファイルがブラウザ上で動作しますが、その際にユーザの状態やデータをローカルの環境に保存するしくみがあります。これを webStrage といいます。Web Storage には JavaScript によってアクセスします

![image-20200902184336418](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902184336418.png)


Web Storage は「 key-value 型 」のデータストア であり、データを特定するための名前（ key ）とそれに対する値（ value ）の組み合わせとしてデータを保存します。データを参照する場合は key を指定してその value を取り出します。
このように、Web Storage はデータをシンプルに扱える反面、複雑なデータを管理するには不向きです。

Web Storage には Session Storage と Local Storage の２種類があります。
Session Storage はブラウザのウィンドウ（もしくはタブ）ごとに利用できるデータストアで、ウィンドウを閉じると破棄されてしまいます。またウィンドウ間でデータを共有することはできません。
一方、Local Storage はブラウザ単位ではなく「オリジン 」単位で管理され、ブラウザのウィンドウには依存せず保存できます。また、オリジンが同じであれば異なるブラウザのウィンドウでデータを共有することが可能です。


オリジンとは、http://www.example.com:80/ のように、「プロトコル://ホスト名:ポート番号」の組み合わせで表現される単位のことをいいます

### Indexed Database API

Lesson 3 で説明した Web Storage はファイルが対象でしたが、ローカルにデータベース機能も持たせることができます。これを Indexed Database （IndexedDB と略されることもある）といい、JavaScript から Indexed Database API を呼び出すことで操作できます。


Indexed Database はデータベースといっても、SQL によって操作する一般的なリレーショナルデータベース ではなく、SQL を使わない（いわゆる NoSQL 型の）簡易データベースです。オリジン単位で領域を持ち、その中に複数のデータベースを作成して利用することができます。（オブジェクトストア とも呼ばれます）


NoSQL 型データベースなので、Web Storage 同様、データは key-value 型で操作することになります。Web Storage （の Local Storage ）と Indexed Database の違いは以下のようになります。



![image-20200902184552091](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902184552091.png)

### アプリケーションキャッシュ

もともと Web サーバにあったコンテンツがローカルのブラウザにキャッシュ（一時保存）された後にインターネットから切断されたとしても、Web Storage や Indexed Database の機能を使うことにより、ローカルなアプリケーションとして動作させることが可能です。

![image-20200902185426371](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902185426371.png)

コンテンツをオフラインウェブアプリケーション としてローカルだけで動作させるためには、必要なコンテンツ一式（ HTML / CSS / JavaScript / 画像 / 動画など）を最初にダウンロードしてブラウザに保存する必要があります。これが「アプリケーションキャッシュ 」と呼ばれるものです。


アプリケーションキャッシュを実現するためには、ブラウザにキャッシュとして保存する対象のファイルを「マニフェスト」ファイルに列挙しておきます。
（マニフェストファイルの指定方法については、第２章 Lesson 3 DOCTYPE 宣言と html 要素を参照のこと）


以下はマニフェストファイルの記述例です。

```
CACHE MANIFEST

# Version 20140315001

CACHE:
movie.mp4
jquery.js

NETWORK:
header.jpg

FALLBACK:
topics.html topics_old.html
```

- \# で始まる行はコメント行です
- CACHE: で始まるセクションには、キャッシュさせるファイルを列挙します
- NETWORK: で始まるセクションには、キャッシュさせず Web サーバにアクセスするたびに毎回ダウンロードするファイルを指定します
- FALLBACK: で始まるセクションでは、対象ファイルがダウンロードできない場合に代替するファイルを記述しておきます

キャッシュファイルは強制的に削除を行わない限り、保存期間中はブラウザに残るため、Web サーバ側のファイルが新しくなった場合に不整合が発生してしまいます。この場合は Web サーバ側でマニフェストファイルを更新することでキャッシュ対象が更新されたことを Web ブラウザに認識させます。
この例では、コメント行の Version 行の数値を変更することによりマニフェストファイルが更新されるため、ブラウザにキャッシュを更新するよう指示することができます。

### webworkers

HTML で JavaScript が実行される際には、処理は一つのスレッド （シングルスレッド ）にて逐次実行されます。JavaScript の処理が高度化したり、ファイルやデータベースアクセスを繰り返す長時間処理が必要となってくると、その処理の完了まで画面のレンダリングが遅延したり、ブラウザがフリーズした状態になったりすることになります。


これを解決するために、メインのスレッドとは別に JavaScript の長時間処理や高負荷処理をバックグラウンドのスレッドで並行して動作（マルチスレッド ）させるしくみが Web Workers です。

![image-20200902185921944](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902185921944.png)

メインスレッドでは、実行する JavaScript ファイルを指定して Web Workers を起動し、JavaScript への入力値として Web Workers にメッセージを送信したのち、ただちに次の処理へ移ります。
別の Worker スレッドとして起動された JavaScript は、終了するとメインスレッドにメッセージを送信し終了します。メインスレッドはこのメッセージを受け取って処理を継続します。

### websocket

ローカルで動作するウェブアプリケーションと Web サーバが双方向に通信するしくみとして、HTML5 では WebSocket が利用可能となりました。


従来の HTTP による通信はコネクションレス であり、Web クライアントと Web サーバの一往復の通信のたびにコネクションは切断されます。また、毎回通信には HTTP ヘッダ情報が付加されて送信されます。

![image-20200902190039964](C:\Users\masaya_y\AppData\Roaming\Typora\typora-user-images\image-20200902190039964.png)

WebSocket では、Web クライアントから、最初の接続で Web サーバに同じコネクションを利用するよう「ハンドシェイク リクエスト」を送ります。Web サーバはこれに応答し「ハンドシェイクレスポンス」を送ります。
以降は、明示的にコネクションを切断しないかぎり、一つのコネクションを使い続ける形でソケット通信 が行われます。また、Web クライアント、Web サーバどちらからでも通信リクエストを開始することが可能となります。


WebSocket の機能により、Web クライアント（のアプリケーション）と Web サーバ（のサーバプログラム）間で同じデータを共有したリアルタイム通信アプリケーションや、Web サーバから Web クライアントにプッシュ配信 するようなアプリケーションが構築可能となります。